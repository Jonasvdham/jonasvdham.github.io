(function(){"use strict";var t={1019:function(t,e,n){var r=n(9242),i=n(3396);function o(t,e,n,r,o,a){const l=(0,i.up)("NetFlowMap");return(0,i.wg)(),(0,i.j4)(l)}var a=n(7139);const l={class:"p-5 text-center bg-light"},s=(0,i._)("h1",{class:"mb-3"},"Net wood import/export per country (x1000$)",-1),h={id:"grad"},u={style:{float:"left",width:"15%",height:"auto","line-height":"30px","vertical-align":"middle","font-family":"Verdana","font-size":"10px",overflow:"hidden","text-align":"center",color:"white"}},d={style:{float:"right",width:"15%",height:"auto","line-height":"30px","vertical-align":"middle","font-family":"Verdana","font-size":"10px",overflow:"hidden","text-align":"center",color:"white"}},f={key:0},w=["width","height"],c={class:"year",x:"180",y:"80","font-family":"Verdana (sans-serif)","font-weight":"bold","font-size":"20pt",dy:"0.35em"},v={key:0,class:"year",x:"180",y:"120","font-family":"Verdana (sans-serif)","font-weight":"bold","font-size":"14pt",dy:"0.35em"},p=["onMouseover","d","fill"],g=["d","stroke","stroke-width"];function y(t,e,n,r,o,y){const m=(0,i.up)("center");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",l,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[s])),_:1})]),(0,i._)("div",h,[(0,i._)("div",u,[(0,i._)("b",null,[(0,i._)("span",null,(0,a.zw)(t.min),1)])]),(0,i._)("div",d,[(0,i._)("b",null,[(0,i._)("span",null,(0,a.zw)(t.max),1)])])]),(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[null!=t.worldData&&null!=t.netFlowsData&&null!=t.imexFlowsData?((0,i.wg)(),(0,i.iD)("div",f,[((0,i.wg)(),(0,i.iD)("svg",{class:"map",width:t.width,height:t.height},[(0,i._)("text",c,(0,a.zw)(t.year),1),null!=t.hover&&null!=t.imexFlowsData[t.hover]?((0,i.wg)(),(0,i.iD)("text",v,(0,a.zw)(t.imexFlowsData[t.hover]["country"]),1)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.worldData.features,(n=>((0,i.wg)(),(0,i.iD)("path",{onMouseover:e=>t.hover=n.properties.ISO_A3,onMouseleave:e[0]||(e[0]=e=>t.hover=null),class:"country",key:n.properties.ADM0_A3,d:y.getPathForFeature(n),fill:y.fillColor(n.properties.ISO_A3)},null,40,p)))),128)),null!=t.hover&&null!=t.imexFlowsData[t.hover]?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[t.imexFlowsData[t.hover][t.year]?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(t.imexFlowsData[t.hover][t.year],((e,n)=>((0,i.wg)(),(0,i.iD)("path",{class:"lines",key:`${e.ISO3}${n}`,d:y.generateLink(e),fill:"none",stroke:t.linkStyle.stroke,"stroke-width":y.generateWidth(e)},null,8,g)))),128)):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)],8,w))])):(0,i.kq)("",!0)])),_:1})])}var m=n(7622),x=n(5315),D={data:()=>({worldData:null,netFlowsData:null,imexFlowsData:null,hover:null,dataType:"import",year:2017,width:1400,height:960,min:-18278800,max:18278800,yearList:[1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017],yearIndex:0,link:{type:"LineString",coordinates:[[100,60],[-60,-30]]},linkStyle:{fill:"grey",stroke:"orange",strokeWidth:7}}),mounted(){(0,m.AVB)("./data/world.geojson").then((t=>{this.worldData=t})),(0,m.AVB)("./data/netflows.json").then((t=>{this.netFlowsData=t})),(0,m.AVB)("./data/imexflows_top10.json").then((t=>{this.imexFlowsData=t})),setInterval((()=>this.updateYear()),2e3)},computed:{projection(){return(0,m.mw4)().translate([this.width/2,this.height/2])}},methods:{getPathForFeature(t){return(0,m.l49)().projection(this.projection)(t)},fillColor(t){return null!=this.hover?t==this.hover?"black":this.imexFlowsData[this.hover]&&this.year in this.imexFlowsData[this.hover]&&t in this.imexFlowsData[this.hover][this.year]?this.generateColor(this.netFlowsData[t][this.year]):"#999999":t in this.netFlowsData?this.generateColor(this.netFlowsData[t][this.year]):"#999999"},generateColor(t){return(0,x.Z)(1-(t-this.min)/(this.max-this.min))},updateYear(){this.yearIndex==this.yearList.length-1?(this.yearIndex=0,this.year=2017):(this.year=this.yearList[this.yearIndex],this.yearIndex++)},generateLink(t){var e=this.getPathForFeature({type:"LineString",coordinates:[[this.imexFlowsData[this.hover]["lon"],this.imexFlowsData[this.hover]["lat"]],[t.lon,t.lat]]});return e},generateWidth(t){var e=100*t.imex/this.max;return e<1?1:e>10?10:e}}},k=n(89);const F=(0,k.Z)(D,[["render",y]]);var b=F,_={name:"App",components:{NetFlowMap:b}};const O=(0,k.Z)(_,[["render",o]]);var j=O;(0,r.ri)(j).mount("#app")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(e,r,i,o){if(!r){var a=1/0;for(u=0;u<t.length;u++){r=t[u][0],i=t[u][1],o=t[u][2];for(var l=!0,s=0;s<r.length;s++)(!1&o||a>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[s])}))?r.splice(s--,1):(l=!1,o<a&&(a=o));if(l){t.splice(u--,1);var h=i();void 0!==h&&(e=h)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[r,i,o]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,o,a=r[0],l=r[1],s=r[2],h=0;if(a.some((function(e){return 0!==t[e]}))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(s)var u=s(n)}for(e&&e(r);h<a.length;h++)o=a[h],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(u)},r=self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1019)}));r=n.O(r)})();
//# sourceMappingURL=app.b6ad3721.js.map